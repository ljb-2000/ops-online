<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="Will Zhao Modify">
        <link rel="shortcut icon" href="/static/images/favicon.png" type="/static/image/png">

        <title>OPS 管理系统</title>

        <link href="/static/css/style.default.css" rel="stylesheet">
	<link href="/static/css/style.css" rel="stylesheet">
        <link href="/static/css/plugins/dropzone/basic.css" rel="stylesheet">
	<link href="/static/css/plugins/dropzone/dropzone.css" rel="stylesheet">
	<script src="/static/js/base.js"></script>   
	
    </head>

    <body>
{% load mytags %}     	
<!-- Preloader -->
<div id="preloader">
    <div id="status"><i class="fa fa-spinner fa-spin"></i></div>
</div>

        <section>

            <div class="leftpanel">

                <div class="logopanel">
                    <h1><span>[</span> Tcloud运维管理平台 <span>]</span></h1>
                </div><!-- logopanel -->

                <div class="leftpanelinner">

                    <!-- This is only visible to small devices -->
                    <div class="visible-xs hidden-sm hidden-md hidden-lg">   
                        <div class="media userlogged">
                            <img alt="" src="/static/images/loggeduser.png" class="media-object">
                            <div class="media-body">
                                <h4>John Doe</h4>
                                <span>"Life is so..."</span>
                            </div>
                        </div>

                        <h5 class="sidebartitle actitle"></h5>
                        <ul class="nav nav-pills nav-stacked nav-bracket mb30">
                            <li><a href="/logout/"><i class="fa fa-sign-out"></i> <span>退出</span></a></li>
                        </ul>
                    </div>

                    <h5 class="sidebartitle">导航</h5>
                    <ul class="nav nav-pills nav-stacked nav-bracket">
                        <li><a href="/upload/"><i class="fa fa-download"></i> <span>文件上传</span></a></li>
                    </ul>


                </div><!-- leftpanelinner -->
            </div><!-- leftpanel -->

            <div class="mainpanel">

                <div class="headerbar">

                    <a class="menutoggle"><i class="fa fa-bars"></i></a>


                    <div class="header-right">
                        <ul class="headermenu">
                            <li>
                                <div class="btn-group">
                                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                        <img src="/static/images/loggeduser.png" alt="" />
                                         {{user.username}}
{#                                        <span class="caret"></span>#}
                                    </button>
{#                                    <ul class="dropdown-menu dropdown-menu-usermenu pull-right">#}
{#                                        <li><a href="/"><i class="glyphicon glyphicon-log-out"></i>退出</a></li>#}
{#                                    </ul>#}
                                </div>
                            </li>
                            <li>
                                <button id="btn_sys_logout" class="btn btn-default tp-icon chat-icon" title="退出">
                                    <i class="glyphicon glyphicon-log-out"></i>
                                </button>
                            </li>
                        </ul>
                    </div><!-- header-right -->

                </div><!-- headerbar -->

                <div class="pageheader">
                    <h2><i class="fa fa-download"></i> 文件上传 <span></span></h2>
                    <div class="breadcrumb-wrapper">
                        <span class="label">You are here:</span>
                        <ol class="breadcrumb">
                            <li><a href="/dashboard/">OPS</a></li>
                            <li class="active">文件上传</li>
                        </ol>
                    </div>
                </div>

                <div class="contentpanel">

<div class="wrapper wrapper-content animated fadeIn">
    <div class="row">
        <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>上传文件</h5>
	     <!---   <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="#">Config option 1</a>
                        </li>
                        <li><a href="#">Config option 2</a>
                        </li>
                    </ul>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>   --->
            </div>
            <div class="ibox-content">
                <div class="">
                    <form id="my-awesome-dropzone" class="dropzone" action="#">
                        <div class="dropzone-previews">
                            <input id="hosts" name="hosts"  type="text" class="form-control" required="不能为空" placeholder="输入主机地址，逗号隔开，确保你有输入主机地址的权限" size="80%">
                        </div>
                        <button type="submit" class="btn btn-primary pull-right">全部上传</button>
                        <div></div>
                    </form>
                </div>
                <div>
                    <div class="m text-right"><small>上传文件到后端服务器的/data/repos/目录下，请注意查看</small> </div>
                </div>
            </div>
        </div>
      </div>
    </div>
</div>				
				
                </div>

            </div><!-- mainpanel -->

        </section>

        <script src="/static/js/jquery-1.11.1.min.js"></script>
        <script src="/static/js/jquery-migrate-1.2.1.min.js"></script>
        <script src="/static/js/bootstrap.min.js"></script>
        <script src="/static/js/modernizr.min.js"></script>
        <script src="/static/js/jquery.sparkline.min.js"></script>
        <script src="/static/js/toggles.min.js"></script>
        <script src="/static/js/retina.min.js"></script>
        <script src="/static/js/jquery.cookies.js"></script>
        <script src="/static/js/custom.js"></script>
        <script src="/static/js/dropzone/dropzone.js"></script>   

    </body>

<script>
    $(document).ready(function(){

        Dropzone.options.myAwesomeDropzone = {

            autoProcessQueue: false,
            uploadMultiple: true,
            parallelUploads: 100,
            maxFiles: 100,
            url: '/upload/',

            // Dropzone settings
            init: function() {
                var myDropzone = this;

                this.element.querySelector("button[type=submit]").addEventListener("click", function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    myDropzone.processQueue();
                });
                this.on("sendingmultiple", function() {
                });
                this.on("successmultiple", function(files, response) {
                    alert(response)
                });
                this.on("errormultiple", function(files, response) {
                });
            }

        }

   });

$('#my-awesome-dropzone').validator({
    timely: 2,
    theme: "yellow_right_effect",
    fields: {
        "hosts": {
            rule: "required",
            tip: "输入上传的Host",
            ok: "",
            msg: {required: "必须填写!"}
        }
    },
    valid: function(form) {
        form.submit();
    }
});

</script>
	
</html>

